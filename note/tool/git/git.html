<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git学习笔记 | xzcspace</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/ico.png">
    <meta name="description" content="岁不寒，无以知松柏；事不难，无以知君子。">
    <link rel="preload" href="/assets/css/0.styles.1d55ade0.css" as="style"><link rel="preload" href="/assets/js/app.22cdeea8.js" as="script"><link rel="preload" href="/assets/js/4.7e2d6d0c.js" as="script"><link rel="preload" href="/assets/js/1.71096cea.js" as="script"><link rel="preload" href="/assets/js/10.64f5f030.js" as="script"><link rel="prefetch" href="/assets/js/11.eeb527b7.js"><link rel="prefetch" href="/assets/js/12.d7077247.js"><link rel="prefetch" href="/assets/js/13.63ce1c7d.js"><link rel="prefetch" href="/assets/js/14.0e8eb721.js"><link rel="prefetch" href="/assets/js/15.7919fa7e.js"><link rel="prefetch" href="/assets/js/16.657271fc.js"><link rel="prefetch" href="/assets/js/17.d0c793cb.js"><link rel="prefetch" href="/assets/js/18.62cce7a4.js"><link rel="prefetch" href="/assets/js/19.d1328dbb.js"><link rel="prefetch" href="/assets/js/20.6244d73e.js"><link rel="prefetch" href="/assets/js/21.1f055ee4.js"><link rel="prefetch" href="/assets/js/22.aa5d75a5.js"><link rel="prefetch" href="/assets/js/3.4cfdc8f8.js"><link rel="prefetch" href="/assets/js/5.c580414c.js"><link rel="prefetch" href="/assets/js/6.13694beb.js"><link rel="prefetch" href="/assets/js/7.7ada1f29.js"><link rel="prefetch" href="/assets/js/8.1482064e.js"><link rel="prefetch" href="/assets/js/9.289f2f40.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1d55ade0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-dad8a512><div data-v-dad8a512><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-dad8a512 data-v-dad8a512><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-dad8a512 data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>xzcspace</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>xiezongchen</span>
            
          <span data-v-64685f0e>2019 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-dad8a512><header class="navbar" data-v-dad8a512><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="xzcspace" class="logo"> <span class="site-name">xzcspace</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程/" class="nav-link"><i class="iconfont undefined"></i>
  编程
</a></li><li class="dropdown-item"><!----> <a href="/categories/工具/" class="nav-link"><i class="iconfont undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/note/" class="nav-link router-link-active"><i class="iconfont reco-document"></i>
  Notes
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-dad8a512></div> <aside class="sidebar" data-v-dad8a512><div class="personal-info-wrapper" data-v-ca798c94 data-v-dad8a512><img src="/picture.jpg" alt="author-avatar" class="personal-img" data-v-ca798c94> <h3 class="name" data-v-ca798c94>
    xiezongchen
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>11</h3> <h6 data-v-ca798c94>Article</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>11</h3> <h6 data-v-ca798c94>Tag</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程/" class="nav-link"><i class="iconfont undefined"></i>
  编程
</a></li><li class="dropdown-item"><!----> <a href="/categories/工具/" class="nav-link"><i class="iconfont undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/note/" class="nav-link router-link-active"><i class="iconfont reco-document"></i>
  Notes
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>工具</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/tool/git/git.html" aria-current="page" class="active sidebar-link">Git学习笔记</a></li><li><a href="/note/tool/webpack/webpackBase.html" class="sidebar-link">webpack基础学习</a></li><li><a href="/note/tool/webpack/webpackDev.html" class="sidebar-link">webpack实战——配置开发环境</a></li><li><a href="/note/tool/webpack/webpackPro.html" class="sidebar-link">webpack实战——配置生产环境</a></li><li><a href="/note/tool/webpack/webpackOptimization.html" class="sidebar-link">webpack实战——性能优化</a></li><li><a href="/note/tool/linux/executableScript.html" class="sidebar-link">MacOS、Linux 系统制作自定义脚本</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>Git学习笔记</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>xiezongchen</span>
            
          <span data-v-64685f0e>2019 - </span>
          2021
        </a></span></div></div> <div data-v-dad8a512><main class="page"><div class="page-title" style="display:none;"><h1>Git学习笔记</h1> <hr> <div data-v-aa64b9d0><i class="iconfont reco-account" data-v-aa64b9d0><span data-v-aa64b9d0>xiezongchen</span></i> <i class="iconfont reco-date" data-v-aa64b9d0><span data-v-aa64b9d0>2020-03-14</span></i> <i class="iconfont reco-eye" data-v-aa64b9d0><span id="/note/tool/git/git.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-aa64b9d0><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-aa64b9d0><span class="tag-item" data-v-aa64b9d0>Git</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="git学习笔记"><a href="#git学习笔记" class="header-anchor">#</a> Git学习笔记</h1> <div class="custom-block danger"><p><strong>文章转载请标明地址与出处！</strong></p></div> <h2 id="git的诞生"><a href="#git的诞生" class="header-anchor">#</a> Git的诞生</h2> <p>很多人都知道，Linus在1991年创建了开源的Linux，从此，Linux系统不断发展，已经成为最大的服务器系统软件了。Linus虽然创建了Linux，但Linux的壮大是靠全世界热心的志愿者参与的，这么多人在世界各地为Linux编写代码，那Linux的代码是如何管理的呢？</p> <p>在2002年以前，世界各地的志愿者把源代码文件通过diff的方式发给Linus，然后由Linus本人通过手工方式合并代码！你也许会想，为什么Linus不把Linux代码放到版本控制系统里呢？不是有CVS、SVN这些免费的版本控制系统吗？因为Linus坚定地反对CVS和SVN，这些集中式的版本控制系统不但速度慢，而且必须联网才能使用。有一些商用的版本控制系统，虽然比CVS、SVN好用，但那是付费的，和Linux的开源精神不符。</p> <p>到了2002年，Linux系统已经发展了十年了，由于代码库变得巨大，让Linus很难继续通过手工方式管理了，社区的弟兄们也对这种方式表达了强烈不满，于是Linus选择了一个商业的版本控制系统BitKeeper，BitKeeper的东家BitMover公司出于人道主义精神，授权Linux社区免费使用这个版本控制系统。</p> <p>但是安定团结的大好局面在2005年就被打破了，原因是Linux社区牛人聚集，不免沾染了一些梁山好汉的江湖习气。开发Samba的Andrew试图破解BitKeeper的协议（这么干的其实也不只他一个），被BitMover公司发现了（监控工作做得不错！），于是BitMover公司怒了，要收回Linux社区的免费使用权。</p> <p>Linus可以向BitMover公司道个歉，保证以后严格管教弟兄们，嗯，这是不可能的。实际情况是这样的：Linus花了两周时间自己用C写了一个分布式版本控制系统，这就是Git！一个月之内，Linux系统的源码已经由Git管理了！牛是怎么定义的呢？大家可以体会一下。</p> <p>Git迅速成为最流行的分布式版本控制系统，尤其是2008年，GitHub网站上线了，它为开源项目免费提供Git存储，无数开源项目开始迁移至GitHub，包括jQuery，PHP，Ruby等等。</p> <p>历史就是这么偶然，如果不是当年BitMover公司威胁Linux社区，可能现在我们就没有免费而超级好用的Git了。</p> <h2 id="集中式与分布式"><a href="#集中式与分布式" class="header-anchor">#</a> 集中式与分布式</h2> <p>前面提到，CVS及SVN都是集中式的版本控制系统，而Git是分布式版本控制系统，那么这两者有什么区别呢？</p> <h3 id="集中式"><a href="#集中式" class="header-anchor">#</a> 集中式</h3> <p>集中式版本控制系统，版本库是集中存放在中央服务器的，而干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干完活了，再把自己的活推送给中央服务器。中央服务器就好比是一个图书馆，你要改一本书，必须先从图书馆借出来，然后回到家自己改，改完了再放回图书馆。</p> <img src="/assets/img/concentration.0c3c9bb4.png" alt="concentration" style="zoom:33%;"> <p>集中式版本控制系统最大的毛病就是必须联网才能工作，如果在局域网内还好，带宽够大，速度够快，可如果在互联网上，遇到网速慢的话，可能提交一个10M的文件就需要5分钟，这还不得把人给憋死啊。而且在平时的开发中，由于每个开发者的修改，经常是反复持续进行，在修改的过程中，总会遇到未能稳定、完备到足以提供其他开发者使用的程度，若是在此时提交到仓库，便有可能让仓库的代码处于不稳定、不成熟的状态。当然，也可以让开发者持续修改至足够稳定完备后，再将修改内容提交至仓库。但是，在这个空窗期里，开发者就无法享受到版本控制的好处，他没有办法将修改过程中的不同阶段，划分成为多个版本。关键的是，如果集中式版本控制系统的中央服务器出了问题，那么所有人都没办法干活了。</p> <h3 id="分布式"><a href="#分布式" class="header-anchor">#</a> 分布式</h3> <p>和集中式版本控制系统相比，分布式版本控制系统的安全性要高很多，因为每个人电脑里都有完整的版本库。版本库中包含了完整的版本管理数据、例如提交信息、版本变化记录等等。因此，所有对版本控制系统的操作，都可以直接在本机端的版本库中进行，包括提交、分支、合并、回退等。这样做的好处是，某一个人的电脑坏掉了不要紧，随便从其他人那里复制一个就可以了。在实际使用分布式版本控制系统的时候，其实很少在两人之间的电脑上推送版本库的修改，因为可能你们俩不在一个局域网内，两台电脑互相访问不了，也可能今天你的同事病了，他的电脑压根没有开机。因此，分布式版本控制系统通常也有一台充当“中央服务器”的电脑，但这个服务器的作用仅仅是用来方便“交换”大家的修改，没有它大家也一样干活，只是交换修改不方便而已。而每个开发者都拥有独立的版本库，所以可以直接对自己的版本库进行操作。在离线环境中，开发者既可以连续工作，也可以持续修改，和本地版本库进行交互（比如管理版本、查询修改历史、回溯、提交、……）。这样使得开发者不需要将自己的修改持续送至集中的档案库上，造成其他开发者必须套用这些修改，引起可能的不稳定情况。</p> <img src="/assets/img/distribution.ba9d30fd.png" alt="distribution" style="zoom:33%;"> <p>当然，Git的优势不单是不必联网这么简单，后面我们还会看到Git极其强大的分支管理，把SVN等远远抛在了后面。</p> <h2 id="git术语"><a href="#git术语" class="header-anchor">#</a> Git术语</h2> <p>我们在使用Git时，会遇到许多术语，这里先进行总结，方便后面学习中的理解。</p> <h3 id="工作区（workspace）"><a href="#工作区（workspace）" class="header-anchor">#</a> 工作区（Workspace）</h3> <p>就是你在电脑里能看到并且进行工作的目录</p> <h3 id="暂存区（stage-index）"><a href="#暂存区（stage-index）" class="header-anchor">#</a> 暂存区（stage/index）</h3> <p>在平时开发时，当进行commit操作后（提交到本地仓库，后面会讲），会为这个操作生成日志并保存版本，但是我们有时只想单纯的保存一下代码，并不想直接作为一个版本保存，这就需要暂存区为我们“暂时存一下”。暂存区在 &quot;.git文件&quot; 目录下的index文件（.git/index）中，所以我们把暂存区有时也叫作索引（index）。</p> <h3 id="本地仓库（repository）"><a href="#本地仓库（repository）" class="header-anchor">#</a> 本地仓库（Repository）</h3> <p>可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以“还原”。正是因为本地仓库的存在，才使Git可以在离线的情况下做管理版本、查询修改历史、回溯、提交等操作。</p> <h3 id="远程仓库（remotes）"><a href="#远程仓库（remotes）" class="header-anchor">#</a> 远程仓库（Remotes）</h3> <p>Git 并不像 SVN 那样有个中心服务器，所以远程仓库中的词语“远程”，未必表示仓库在网络或互联网上的其它位置，而只是表示它在别处。 我们在本地仓库、暂存区、工作区所进行的代码版本维护操作都是在本地执行的，而如果你想通过 Git 分享你的代码或者与其他开发人员合作， 你就需要将数据放到一台其他开发人员能够连接的服务器上。简单的说，没有远程仓库不会影响我们对代码版本的维护，但如果想分享代码，必须要有个远程仓库。常见的远程仓库有github、gitee（码云）、gitlab等。gitlab是可以在企业内部搭建，可以创建私有的代码仓库，所以一般企业会部署gitlab存放私有代码。</p> <h3 id="分支（branches）"><a href="#分支（branches）" class="header-anchor">#</a> 分支（Branches）</h3> <p>一个分支意味着一个独立的、拥有自己历史信息的代码线（code line）。你可以从已有的代码中生成一个新的分支，这个分支与剩余的分支完全独立。使用分支意味着你可以从开发主线上分离开来，然后在不影响主线的同时继续工作。有人把 Git 的分支模型称为必杀技特性，而正是因为它，Git从版本控制系统家族里脱颖而出。</p> <h3 id="标签（tags）"><a href="#标签（tags）" class="header-anchor">#</a> 标签（Tags）</h3> <p>标签可以记录某个分支某个特定时间点的状态。如果我们的代码达到一个重要的阶段，可以为其打上标签，通过标签可以很方便的切换到标记时的状态，例如2009年1月25号在testing分支上的代码状态。</p> <h2 id="git工作原理"><a href="#git工作原理" class="header-anchor">#</a> Git工作原理</h2> <h3 id="分支原理"><a href="#分支原理" class="header-anchor">#</a> 分支原理</h3> <p>不只是Git有分支，几乎所有的版本控制系统都以某种形式支持分支。 使用分支意味着你可以把你的工作从开发主线上分离开来，以免影响开发主线。 在很多版本控制系统中，这是一个略微低效的过程——常常需要完全创建一个源代码目录的副本。对于大项目来说，这样的过程会耗费很多时间。而Git 处理分支的方式可谓是难以置信的轻量，创建新分支这一操作几乎能在瞬间完成，并且在不同分支之间的切换操作也是一样便捷。 与许多其它版本控制系统不同，Git 鼓励在工作流程中频繁地使用分支与合并，哪怕一天之内进行许多次。 理解和精通这一特性，你便会意识到 Git 是如此的强大而又独特，并且从此真正改变你的开发方式。</p> <p>在分支方面，Git 保存的不是文件的变化或者差异，而是一系列不同时刻的<strong>快照</strong> 。在进行提交操作时，Git 会保存一个提交对象（commit object）。 知道了 Git 保存数据的方式，我们可以很自然的想到——该提交对象会包含一个指向暂存内容快照的指针。 但不仅仅是这样，该提交对象还包含了作者的姓名和邮箱、提交时输入的信息以及指向它的父对象的指针。 首次提交产生的提交对象没有父对象，普通提交操作产生的提交对象有一个父对象， 而由多个分支合并产生的提交对象有多个父对象，为了更加形象地说明，我们假设现在有一个工作目录，里面包含了三个将要被暂存和提交的文件。 暂存操作会为每一个文件计算校验和SHA-1 哈希算法，然后会把当前版本的文件快照保存到 Git 仓库中（Git 使用 *blob *对象来保存它们），最终将校验和加入到暂存区域等待提交：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">add</span> README test.rb LICENSE
<span class="token function">git</span> commit -m <span class="token string">'The initial commit of my project'</span>
</code></pre></div><p>当使用 <code>git commit</code> 进行提交操作时，Git 会先计算每一个子目录的校验和， 然后在 Git 仓库中这些校验和保存为树对象。随后，Git 便会创建一个提交对象， 它除了包含上面提到的那些信息外，还包含指向这个树对象（项目根目录）的指针。 如此一来，Git 就可以在需要的时候重现此次保存的快照。</p> <p>由于 Git 的分支实质上仅是包含所指对象校验和长度为 40 的 SHA-1 值字符串的文件，所以它的创建和销毁都异常高效。 创建一个新分支就相当于往一个文件中写入 41 个字节（40 个字符和 1 个换行符），如此的简单能不快嘛。这与过去大多数版本控制系统形成了鲜明的对比，它们在创建分支时，将所有的项目文件都复制一遍，并保存到一个特定的目录。 完成这样繁琐的过程通常需要好几秒钟，有时甚至需要好几分钟。所需时间的长短，完全取决于项目的规模。 而在 Git 中，任何规模的项目都能在瞬间创建新分支。 同时，由于每次提交都会记录父对象，所以寻找恰当的合并基础（即共同祖先）也是同样的简单和高效。 这些高效的特性使得 Git 鼓励开发人员频繁地创建和使用分支。后面我们会讲到分支运用时的实际流程。</p> <h2 id="git的使用"><a href="#git的使用" class="header-anchor">#</a> Git的使用</h2> <h3 id="diff及工作区撤销"><a href="#diff及工作区撤销" class="header-anchor">#</a> diff及工作区撤销</h3> <p>本地编写的代码，不执行任何Git命令，处于工作区，此时我们可以通过 <code>git diff</code> 查看工作区的修改。如果我们不想要某个文件的修改，可以使用 <code>git checkout -- [file]</code> 撤销文件修改，命令中 <code>[file]</code> 为所要撤销的具体文件路径。如果想要撤销所有本地修改，可以使用 <code>git checkout -- .</code> 来操作。但是要注意的是，通过此处撤销命令所撤销的修改，不可二次撤销，一旦执行将无法通过Git找回撤销内容。撤销之后再次执行 <code>git diff</code> 命令将没有任何输出，表示工作区没有修改内容。</p> <h3 id="add及暂存区撤销"><a href="#add及暂存区撤销" class="header-anchor">#</a> add及暂存区撤销</h3> <p>当工作区的代码完成之后，我们需要先执行 <code>git add .</code> 将工作区内的所有修改添加到暂存区，也可以使用 <code>git add [file]</code> 添加某个文件的修改到暂存区，命令中 <code>[file]</code> 为所要添加的具体文件路径。执行添加所有修改操作之后，我们执行 <code>git diff</code> 命令将不会有任何输出（因为此时修改已添加到暂存区），想要查看暂存区的修改，可以使用 <code>git diff --staged</code> 来查看，其输出与 <code>git diff</code> 的输出形式一模一样。这个时候我们想要撤销暂存区的全部修改，可以使用 <code>git reset .</code> 来操作，也可以使用 <code>git reset [file]</code> 撤销某个文件，命令中 <code>[file]</code> 为所要撤销的具体文件路径。此撤销命令是可二次撤销的，因为撤销后修改会回到工作区，通过 <code>git add</code> 命令可以将修改再一次添加到暂存区。暂存区与工作区的撤销操作可以使用 <code>git reset --hard</code> 合并成一次操作（不推荐使用）。</p> <h3 id="commit及本地仓库撤销"><a href="#commit及本地仓库撤销" class="header-anchor">#</a> commit及本地仓库撤销</h3> <p>当我们的代码开发到一定的阶段后，可以使用 <code>git commit -m &quot;log&quot;</code> 将暂存区的代码提交到本地仓库并生成快照（便于回退等操作），命令中 <code>&quot;log&quot;</code> 处可以让我们为此次提交写一些日志，方便记忆及与他人协作， <code>commit</code> 操作可以将多次的暂存合并提交。当代码提交后，我们可以使用 <code>git log</code> 查看提交历史，在不传入任何参数的默认情况下，<code>git log</code> 会按时间先后顺序列出所有的提交，最近的更新排在最上面，也可以使用 <code>git log -2</code> 过滤出最新的两条提交。每一条提交历史会列出当时提交的 SHA-1 校验（commit后面的很长的编码）、作者的名字、作者的电子邮件、提交时间以及提交说明。如果我们不想要最新修改的内容，有两种方法进行撤销操作。第一种方法（不推荐，仅供了解）是使用 <code>git checkout [SHA-1]</code> 进行操作，这个方法可以让我们切换到任意提交时刻，命令中 <code>[SHA-1]</code> 指的是提交历史中commit后面很长的编码，在这里可以使用全称，也可以简写成前面7个编码。第二种方法是使用 <code>git reset --hard HEAD^</code> 进行操作。在Git中，用 <code>HEAD</code> 表示当前版本， <code>HEAD^</code> 代表上个版本，上上个版本可以表示为 <code>HEAD^^</code> ，但是我如果向上100个版本，我们总不能写100个 <code>^</code> 吧，所以我们可以用 <code>HEAD~100</code> 来表示，那么上个版本也可以写成 <code>HEAD~1</code> 。此撤销命令是可二次撤销的，当第一次撤销后我们使用 <code>git log</code> 会发现撤销前的提交已经不见了，所以我们可以使用 <code>git reflog</code> 查看使用过的每一次命令，在这里我们可以找到撤销前那次提交的SHA-1，使用 <code>git reset --hard [SHA-1]</code> 即可二次撤销。</p> <h3 id="分支及其操作"><a href="#分支及其操作" class="header-anchor">#</a> 分支及其操作</h3> <p>不知你是否还记得在二次撤销时我建议使用HEAD方法，这是因为Git的原理最精华的部分就是指针，而HEAD便是Git的指针。Git的默认分支是 <code>master</code> ，它与其他分支并没有什么不同，只是开发时我们一般会把它看做“根分支”。我们使用 <code>git branch [name]</code> 来新建分支，命令中 <code>[name]</code> 指的是你为新分支起的名字。当你新建分支时，Git为你创建了一个可以移动的新的指针，而指针指向当前位置，HEAD并不会自动切换到新分支中去。我们可以使用 <code>git log --decorate</code> 来查看各个分支当前所指的对象，HEAD所指向的分支就是我们当前所在的分支。需要注意的是，HEAD和分支都是指针，HEAD指向代表分支的指针，表示我们在那个所指的分支。如果想看当前所指的分支以及有哪些分支，可以使用 <code>git branch</code> 查看。</p> <img src="/assets/img/branch1.67d110da.png" alt="branch1" style="zoom:50%;"> <p>当我们新建分支后，可以使用 <code>git checkout [branchName]</code> 切换分支，命令中 <code>[branchName]</code> 指的是所要前往的分支名，操作过后HEAD会指向切换的分支。我们也可以使用 <code>git checkout -b [branchName]</code> 命令在新建一个分支的同时切换过去，简化新建分支和切换分支的操作。</p> <img src="/assets/img/branch2.4c43d963.png" alt="branch2" style="zoom:50%;"> <p>当我们新建并切换分支后，对代码进行修改并提交（commit），你会发现HEAD与其所指的分支（也就是你当前所在分支）随着提交操作自动向前移动，而master分支并没有移动，它仍然指向运行 <code>git checkout</code> 时所指的对象。此时我们切换回master分支后，会发现我们对代码的修改消失了，切换回之前的分支修改就又回来了。也就是说，此时我们切换回master分支后，HEAD会指回master分支，工作目录恢复成 <code>master</code> 分支所指向的快照内容。</p> <img src="/assets/img/branch3.76db8174.png" alt="branch3" style="zoom:42%;"> <p>当我们切换到master分支并进行代码修改的话，修改内容是基于master所在快照的，本质上来讲，这就是忽略之前新建分支所做的修改，向另一个方向进行开发。此时我们将在master分支所修改的代码提交，那么这个项目的提交历史会产生分叉。</p> <img src="/assets/img/branch4.9c16269e.png" alt="branch4" style="zoom:42%;"> <p>现在我们的事例中有两条分支，而我不愿意放弃任何分支，并且他们对我的项目都有用怎么办呢？这时我们需要合并分支操作。Git 的分支操作可以使用 <code>git merge</code> 和 <code>git rebase</code> ，这里我们先简单的讲解一下 merge 的使用，其他操作命令以及命令的区别我会出一个专题讲解。merge 是一个将其他分支合并到当前所在分支的命令，所以在使用命令时先确保自己所在分支没问题，然后使用 <code>git merge [branchName]</code> 命令，命令中 <code>[branchName]</code> 指的是被合并的分支，此命令会留下两个分支的操作历史。</p> <img src="/assets/img/merge1.a2405218.png" alt="merge1" style="zoom:39%;"> <p>我们可以看到，当进行操作时 Git 做了一个新的快照并且自动创建一个新的提交指向它。这个被称作一次合并提交，它的特别之处在于他有不止一个父提交。而这整个分支变动会被记录在代码历史中。合并完分支后，如果被合并的分支没有用处了，我们可以使用 <code>git branch -d [branchName]</code> 删除分支。有时候合并操作不会如此顺利， 如果你在两个不同的分支中，对同一个文件的同一个部分进行了不同的修改，Git 就没法干净的合并它们。当出现合并冲突时，Git 不会自动地创建一个新的合并提交，它会暂停下来等待我们去解决合并产生的冲突。任何因包含合并冲突而有待解决的文件，都会以未合并状态标识出来。 Git 会在有冲突的文件中加入标准的冲突解决标记，这样你可以打开这些包含冲突的文件然后手动解决冲突。 出现冲突的文件会包含一些特殊区段，看起来像下面这个样子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span> <span class="token constant">HEAD</span><span class="token operator">:</span>index<span class="token punctuation">.</span>html
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;footer&quot;</span><span class="token operator">&gt;</span>Old code<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;footer&quot;</span><span class="token operator">&gt;</span>New code<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;</span> feature<span class="token operator">:</span>index<span class="token punctuation">.</span>html
</code></pre></div><p>这表示 <code>HEAD</code> 所指示的版本在这个区段的上半部分（<code>=======</code> 的上半部分），而 feature 分支所指示的版本在 <code>=======</code> 的下半部分。 为了解决冲突，你必须选择使用由 <code>=======</code> 分割的两部分中的一个，或者你也可以自行合并这些内容。当我们使用Vscode、Webstorm等 ide 工作时，解决冲突会变得更容易。当我们解决了所有文件里的冲突之后，使用 add 命令来将其标记为冲突已解决。 一旦暂存这些原本有冲突的文件，Git 就会将它们标记为冲突已解决。当我们检查完所有合并文件没问题后，可以使用 commit 命令来完成合并提交。最后，我们可以使用 <code>git log --oneline --graph --all</code> 来查看提交记录的分支图。</p> <h3 id="git-的其他操作"><a href="#git-的其他操作" class="header-anchor">#</a> Git 的其他操作</h3> <p>如今程序员之间比较流行的远程代码仓库有 GitHub、Gitee 等，我比较推荐大家使用 Gitee 来储存代码，毕竟国内访问 Gitee 的速度很快。而有时我们需要使用其他仓库，而速度很慢怎么办呢？可以通过科学上网，然后改变 Git 的 <code>global</code> 来适当的提升速度。使用 <code>git config --global</code> 命令可以设置，为了防止所有地址都被拦截，我们可以定向的设置，例如 <code>git config --global http.https://github.com.proxy socks5://127.0.0.1:49166</code> 则是定向的拦截 <code>https://github.com.proxy</code> 请求。当我们设置好后，可以通过 <code>git config --global -l</code> 查看我们设置的所有 global。</p> <blockquote><p>由于时间不足，先写到这里，今后会慢慢补充！</p></blockquote> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ol><li><p><a href="https://git-scm.com/book/en/v2" target="_blank" rel="noopener noreferrer">git book<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://www.liaoxuefeng.com/wiki/896043488029600" target="_blank" rel="noopener noreferrer">Git教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ol></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/22/2020, 9:48:50 PM</span></div></footer> <!----> <!----> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-40a3448a><li class="level-2" data-v-40a3448a><a href="/note/tool/git/git.html#git的诞生" class="sidebar-link" data-v-40a3448a>Git的诞生</a></li><li class="level-2" data-v-40a3448a><a href="/note/tool/git/git.html#集中式与分布式" class="sidebar-link" data-v-40a3448a>集中式与分布式</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#集中式" class="sidebar-link" data-v-40a3448a>集中式</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#分布式" class="sidebar-link" data-v-40a3448a>分布式</a></li><li class="level-2" data-v-40a3448a><a href="/note/tool/git/git.html#git术语" class="sidebar-link" data-v-40a3448a>Git术语</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#工作区（workspace）" class="sidebar-link" data-v-40a3448a>工作区（Workspace）</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#暂存区（stage-index）" class="sidebar-link" data-v-40a3448a>暂存区（stage/index）</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#本地仓库（repository）" class="sidebar-link" data-v-40a3448a>本地仓库（Repository）</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#远程仓库（remotes）" class="sidebar-link" data-v-40a3448a>远程仓库（Remotes）</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#分支（branches）" class="sidebar-link" data-v-40a3448a>分支（Branches）</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#标签（tags）" class="sidebar-link" data-v-40a3448a>标签（Tags）</a></li><li class="level-2" data-v-40a3448a><a href="/note/tool/git/git.html#git工作原理" class="sidebar-link" data-v-40a3448a>Git工作原理</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#分支原理" class="sidebar-link" data-v-40a3448a>分支原理</a></li><li class="level-2" data-v-40a3448a><a href="/note/tool/git/git.html#git的使用" class="sidebar-link" data-v-40a3448a>Git的使用</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#diff及工作区撤销" class="sidebar-link" data-v-40a3448a>diff及工作区撤销</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#add及暂存区撤销" class="sidebar-link" data-v-40a3448a>add及暂存区撤销</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#commit及本地仓库撤销" class="sidebar-link" data-v-40a3448a>commit及本地仓库撤销</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#分支及其操作" class="sidebar-link" data-v-40a3448a>分支及其操作</a></li><li class="level-3" data-v-40a3448a><a href="/note/tool/git/git.html#git-的其他操作" class="sidebar-link" data-v-40a3448a>Git 的其他操作</a></li><li class="level-2" data-v-40a3448a><a href="/note/tool/git/git.html#参考资料" class="sidebar-link" data-v-40a3448a>参考资料</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-6f76602d data-v-6f76602d><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-6f76602d><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-6f76602d></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-6f76602d></path></svg></div></div></div>
    <script src="/assets/js/app.22cdeea8.js" defer></script><script src="/assets/js/4.7e2d6d0c.js" defer></script><script src="/assets/js/1.71096cea.js" defer></script><script src="/assets/js/10.64f5f030.js" defer></script>
  </body>
</html>
